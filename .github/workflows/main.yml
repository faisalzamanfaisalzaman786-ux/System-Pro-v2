- name: Generate unique package name
  id: package
  run: |
    SANITIZED=$(echo "${{ github.event.client_payload.app_name }}" | tr '[:upper:]' '[:lower:]' | sed 's/[^a-z0-9]//g')
    # Ensure SANITIZED starts with a letter (if it starts with digit, prepend 'app')
    if [[ $SANITIZED =~ ^[0-9] ]]; then
      SANITIZED="app${SANITIZED}"
    fi
    TIMESTAMP=$(date +%s)
    # Last segment must NOT start with a digit → use "ts" prefix
    PACKAGE_NAME="com.userbuild.${SANITIZED}.ts${TIMESTAMP}"
    echo "package_name=$PACKAGE_NAME" >> $GITHUB_OUTPUT
    echo "✅ Generated package name: $PACKAGE_NAME"
